<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.koreait.nearby.repository.BoardRepository">
 	
 	<resultMap type="Board" id="BoardMap">
 		<result column="B_NO" property="bNo" />
 		<result column="ID" property="id" />
 		<result column="CONTENT" property="content" />
 		<result column="IP" property="ip" />
 		<result column="LOCATION" property="location" />
 		<result column="ORIGIN" property="origin" />
 		<result column="SAVED" property="saved" />
 		<result column="PATH" property="path" />
 		<result column="LIKES" property="likes" />
 		<result column="CREATED" property="created" />
 		<result column="MODIFIED" property="modified" />
 		<result column="STATE" property="state" />
 	</resultMap>
 
 	<!-- 메인 보드 리스트 뿌리기  -->
   <select id="selectListBoard" resultMap="BoardMap">
   	SELECT B_NO, ID, CONTENT, IP, LOCATION, ORIGIN, SAVED, LIKES, CREATED, PATH, MODIFIED, state
   	  FROM BOARD
   	 ORDER BY B_NO desc
   </select>
	
  <!-- 게시판 하나 상세보기 -->
	<select id="selectBoardByNo" parameterType="Long" resultMap="BoardMap">
		SELECT B_NO, ID, CONTENT, IP, LOCATION, ORIGIN, SAVED, LIKES, CREATED, MODIFIED, state
		  FROM BOARD
	   	 WHERE B_NO =#{bNo}
	</select>
	
  <!-- 글 업로드 -->	
	<insert id="insertBoard" parameterType="Board">
		INSERT INTO BOARD
		VALUES ( BOARD_SEQ.NEXTVAL, #{id}, #{content}, #{ip}, #{location}, #{origin}, #{saved}, #{path}, 0, SYSDATE, SYSDATE, 0)
	</insert>
	
  <!-- 글 수정- login id=글 id와 번호 같을 때 수정가능 -->
 	<update id="updateBoard" parameterType="Board">
 		UPDATE BOARD 
 		   SET CONTENT = #{CONTENT},
 		       LOCATION = #{LOCATION}
 		       ORIGIN = #{ORIGIN},
 		       SAVED = #{SAVED},
 		       MODIFIED = SYSDATE 
 	     WHERE B_no = #{bNo} and ID={id}
 	</update>
	
	
	<!--  글삭제 -->
	<delete id="deleteBoard" parameterType="Long">
	DELETE FROM BOARD
	 WHERE B_no=#{bNo}  and ID={id}
	</delete>
	
	
	
</mapper>